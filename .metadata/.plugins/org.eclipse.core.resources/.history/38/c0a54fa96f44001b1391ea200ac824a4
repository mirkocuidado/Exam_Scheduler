package main;


import java.util.HashMap;
import java.util.List;

import generals.Exam;
import generals.Room;
import generals.Termin;
import readfile.ReadFileRok;
import readfile.ReadFileRooms;

public class Main {

	public static void main(String[] argv) {
		String roomss;
		String rok;
		String resenjeFileName = "result.txt";
		
		
		
		if (argv.length < 2 || argv.length > 3) {
			System.out.println("Neodgovarajuci broj ulaznih parametara");
			return;
		}
		
		roomss = argv[0];
		rok = argv[1];
		
		ReadFileRooms readFileRooms = new ReadFileRooms(roomss);
		ReadFileRok readFileRok = new ReadFileRok(rok);
		
		List<Room> rooms = readFileRooms.getRooms();
		List<Exam> exams = readFileRok.getExams();
		
		String termins[] = { "08:00", "11:30", "15:00", "18:30" };
		int duration = readFileRok.getDuration();
		
		CSP_Algorithm csp = new CSP_Algorithm();
		
		csp.initialDomain(exams, rooms, termins, duration);
		
		int level = 0;
		
		boolean solution = false;
		
		solution = csp.algorithm(exams, level, null);
		
		for(Exam e: CSP_Algorithm.solution.keySet()) {
			System.out.println(e.getExamCodee() + e.getNumberOfSignedStudents());
			List<Termin> tt = CSP_Algorithm.solution.get(e);
			
			int num = 0;
			for(Termin t: tt) {
				num += t.getRoom().getCapacity();
				System.out.println(t.getDay() + "-" + t.getRoom().getName() + " - " + t.getTime());
			}
			System.out.println(num + "/" + e.getNumberOfSignedStudents());
			System.out.println();
		}
		
		return;
	}
}
